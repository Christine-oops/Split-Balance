<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Split & Balance | Institutional Clinical Portal</title>
    <!-- Tailwind CSS for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & Babel for logic and JSX rendering -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=JetBrains+Mono:wght@500&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000d1a;
            color: #ffffff;
            margin: 0;
            overflow-x: hidden;
        }

        .mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Glassmorphism effects */
        .glass-card {
            background: rgba(0, 30, 61, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 215, 0, 0.1);
        }

        /* Custom scrollbar for clinical feel */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #000d1a; }
        ::-webkit-scrollbar-thumb { background: #ffd700; border-radius: 10px; }

        /* Animation for system status */
        @keyframes pulse-gold {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.1); }
        }
        .status-pulse { animation: pulse-gold 2s infinite; }

        .selection-yellow::selection {
            background: #ffd700;
            color: #000;
        }
    </style>
</head>
<body class="selection-yellow">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- Icon Helper for Browser ---
        const LucideIcon = ({ name, className = "w-5 h-5", color = "currentColor" }) => {
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            }, [name]);
            return <i data-lucide={name} className={className} style={{color: color}}></i>;
        };

        // --- Mock Data ---
        const PATIENTS_MOCK = [
            {
                id: 'SB-042',
                name: 'Marcus Wells',
                age: 27,
                status: 'High Confidence',
                primaryModality: 'EEG + Genetic',
                prediction: 'Schizophrenia',
                probability: 91.4,
                bipolarProb: 8.6,
                misdiagnosisRisk: 'High (Previous MDD)',
                fiscalBurden: '$89,798',
                lastUpdate: '10m ago',
                data: {
                    eeg: { status: 'Received', accuracy: 94.2, feature: 'EEGNet: Frontal Gamma Sync Reduction' },
                    fmri: { status: 'Missing', accuracy: 0, feature: 'Inferred via Modality Dropout' },
                    genetic: { status: 'Received', accuracy: 88.1, feature: 'C4-A Variant Overexpression' },
                    behavioral: { status: 'Partial', accuracy: 72.5, feature: 'Semantic Coherence Deficit' }
                },
                reasoning: "The convergence of Gamma-band reduction and C4-A overexpression creates a definitive pattern match against global archives, despite absent fMRI data."
            },
            {
                id: 'SB-088',
                name: 'Sarah Miller',
                age: 34,
                status: 'Differential Analysis',
                primaryModality: 'Full Spectrum',
                prediction: 'Bipolar I',
                probability: 82.3,
                bipolarProb: 82.3,
                misdiagnosisRisk: 'Critical (Delayed 8 yrs)',
                fiscalBurden: '$45,200',
                lastUpdate: '2h ago',
                data: {
                    eeg: { status: 'Received', accuracy: 89.4, feature: 'Right-Lateralized Frontal Asymmetry' },
                    fmri: { status: 'Received', accuracy: 91.2, feature: 'Fronto-Limbic Hyper-connectivity' },
                    genetic: { status: 'Received', accuracy: 84.0, feature: 'Circadian Rhythm Regulators (CLOCK)' },
                    behavioral: { status: 'Received', accuracy: 93.1, feature: 'Reward Sensitivity (Goal-Directed)' }
                },
                reasoning: "State-dependent mood episodes identified via fMRI fronto-limbic variability, distinguishing from chronic schizophrenia profiles."
            },
            {
                id: 'SB-102',
                name: 'Robert Chen',
                age: 22,
                status: 'Single Modality',
                primaryModality: 'EEG Only',
                prediction: 'Schizophrenia',
                probability: 74.8,
                bipolarProb: 25.2,
                misdiagnosisRisk: 'First Episode',
                fiscalBurden: '$90,400',
                lastUpdate: '5h ago',
                data: {
                    eeg: { status: 'Received', accuracy: 78.9, feature: 'Diminished Alpha Power / Slow-Wave' },
                    fmri: { status: 'Pending', accuracy: 0, feature: 'Awaiting Imaging Data' },
                    genetic: { status: 'Missing', accuracy: 0, feature: 'Consent Pending' },
                    behavioral: { status: 'Missing', accuracy: 0, feature: 'Pending Assessment' }
                },
                reasoning: "Preliminary EEGNet extraction identifies neural desynchronization patterns correlating with early psychosis benchmarks."
            }
        ];

        // --- Sub Components ---
        const StatCard = ({ label, value, sub, iconName, trend }) => (
            <div className="bg-[#001e3d] p-6 rounded-3xl border border-white/5 shadow-xl">
                <div className="flex justify-between items-start mb-4">
                    <div className="p-2 bg-[#ffd700]/10 rounded-xl">
                        <LucideIcon name={iconName} color="#ffd700" />
                    </div>
                    {trend && <span className="text-[10px] font-bold text-[#22c55e] bg-[#22c55e]/10 px-2 py-0.5 rounded-full">{trend}</span>}
                </div>
                <div className="text-3xl font-black text-white mb-1 uppercase italic tracking-tighter">{value}</div>
                <div className="text-[10px] font-bold text-gray-500 uppercase tracking-widest">{label}</div>
                {sub && <div className="text-[10px] text-[#ffd700] mt-2 font-medium italic">{sub}</div>}
            </div>
        );

        const ModalityIndicator = ({ type, data }) => {
            const isMissing = data.status === 'Missing' || data.status === 'Pending';
            return (
                <div className={`p-4 rounded-2xl border ${isMissing ? 'bg-white/5 border-white/10 opacity-50' : 'bg-[#000d1a] border-[#ffd700]/20'}`}>
                    <div className="flex justify-between items-center mb-3">
                        <span className="text-[10px] font-black uppercase tracking-widest text-gray-400">{type}</span>
                        <LucideIcon name={isMissing ? "alert-circle" : "check-circle"} className="w-3 h-3" color={isMissing ? "#4b5563" : "#ffd700"} />
                    </div>
                    <div className="text-xs font-bold text-white mb-1">{data.status}</div>
                    <div className="text-[9px] text-gray-500 uppercase font-bold leading-tight h-8">{data.feature}</div>
                    {!isMissing && (
                        <div className="mt-3 h-1 w-full bg-white/5 rounded-full overflow-hidden">
                            <div className="h-full bg-[#ffd700]" style={{ width: `${data.accuracy}%` }}></div>
                        </div>
                    )}
                </div>
            );
        };

        // --- App Component ---
        const App = () => {
            const [activeTab, setActiveTab] = useState('dashboard');
            const [selectedPatient, setSelectedPatient] = useState(PATIENTS_MOCK[0]);
            const [isNavOpen, setIsNavOpen] = useState(false);
            const [searchQuery, setSearchQuery] = useState('');

            const filteredPatients = useMemo(() => {
                return PATIENTS_MOCK.filter(p => 
                    p.name.toLowerCase().includes(searchQuery.toLowerCase()) || 
                    p.id.toLowerCase().includes(searchQuery.toLowerCase())
                );
            }, [searchQuery]);

            return (
                <div className="min-h-screen flex flex-col md:flex-row">
                    
                    {/* Sidebar */}
                    <aside className={`fixed md:relative z-50 w-72 h-full md:h-screen bg-[#001229] border-r border-white/5 p-6 flex flex-col transition-transform duration-300 ${isNavOpen ? 'translate-x-0' : '-translate-x-full md:translate-x-0'}`}>
                        <div className="flex items-center space-x-3 mb-12">
                            <div className="p-2 bg-[#ffd700] rounded-xl shadow-lg">
                                <LucideIcon name="activity" color="#000" />
                            </div>
                            <span className="text-xl font-black italic tracking-tighter uppercase">Split<span className="text-[#ffd700]">&</span>Balance</span>
                        </div>

                        <nav className="flex-1 space-y-2">
                            <button onClick={() => {setActiveTab('dashboard'); setIsNavOpen(false)}} className={`w-full flex items-center space-x-4 px-4 py-3 rounded-2xl transition-all ${activeTab === 'dashboard' ? 'bg-[#ffd700] text-black font-black' : 'text-gray-400 hover:bg-white/5'}`}>
                                <LucideIcon name="bar-chart-3" /> <span className="text-xs uppercase tracking-widest">Global Intake</span>
                            </button>
                            <button onClick={() => {setActiveTab('patients'); setIsNavOpen(false)}} className={`w-full flex items-center space-x-4 px-4 py-3 rounded-2xl transition-all ${activeTab === 'patients' ? 'bg-[#ffd700] text-black font-black' : 'text-gray-400 hover:bg-white/5'}`}>
                                <LucideIcon name="users" /> <span className="text-xs uppercase tracking-widest">Patient Queue</span>
                            </button>
                            <button onClick={() => {setActiveTab('tech'); setIsNavOpen(false)}} className={`w-full flex items-center space-x-4 px-4 py-3 rounded-2xl transition-all ${activeTab === 'tech' ? 'bg-[#ffd700] text-black font-black' : 'text-gray-400 hover:bg-white/5'}`}>
                                <LucideIcon name="cpu" /> <span className="text-xs uppercase tracking-widest">Fusion Logic</span>
                            </button>
                            <button onClick={() => {setActiveTab('about'); setIsNavOpen(false)}} className={`w-full flex items-center space-x-4 px-4 py-3 rounded-2xl transition-all ${activeTab === 'about' ? 'bg-[#ffd700] text-black font-black' : 'text-gray-400 hover:bg-white/5'}`}>
                                <LucideIcon name="shield" /> <span className="text-xs uppercase tracking-widest">Compliance</span>
                            </button>
                        </nav>

                        <div className="mt-auto pt-6 border-t border-white/5">
                            <div className="flex items-center space-x-3 p-4 bg-[#ffd700]/5 rounded-2xl border border-[#ffd700]/10">
                                <div className="w-8 h-8 rounded-full bg-[#ffd700] flex items-center justify-center text-black font-black text-[10px]">CH</div>
                                <div>
                                    <div className="text-[10px] font-black uppercase text-white">Dr. Christine H.</div>
                                    <div className="text-[8px] text-[#ffd700] uppercase font-bold tracking-widest">TORONTO GENERAL</div>
                                </div>
                            </div>
                        </div>
                    </aside>

                    {/* Content */}
                    <main className="flex-1 min-h-screen overflow-y-auto p-4 md:p-10 relative">
                        <button className="md:hidden fixed top-6 right-6 z-[60] p-2 bg-[#ffd700] text-black rounded-lg" onClick={() => setIsNavOpen(!isNavOpen)}>
                            <LucideIcon name={isNavOpen ? "x" : "menu"} color="#000" />
                        </button>

                        {activeTab === 'dashboard' && (
                            <div className="fade-in">
                                <header className="mb-12">
                                    <h1 className="text-4xl font-black italic uppercase tracking-tighter text-white">System Overview</h1>
                                    <p className="text-xs font-bold text-gray-500 uppercase tracking-[0.3em] mt-2">Integrating Neurological, Genetic, and Behavioral Patterns</p>
                                </header>

                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                                    <StatCard label="Global Misdiagnosis Rate" value="23.7%" sub="Schizophrenia Accuracy Gap" iconName="trending-down" />
                                    <StatCard label="Inference Confidence" value="91.4%" sub="Weighted Multimodal Average" iconName="zap" />
                                    <StatCard label="Fiscal Impact Reduction" value="$90K" sub="Est. Savings Per Correct DX" iconName="dollar-sign" trend="+12%" />
                                    <StatCard label="Active Nodes" value="6,402" sub="Hospitals & Clinics Synced" iconName="globe" />
                                </div>

                                <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                                    <div className="lg:col-span-2 glass-card rounded-[2.5rem] p-8 relative overflow-hidden">
                                        <h3 className="text-xl font-black uppercase italic tracking-tighter mb-8 flex items-center space-x-3 text-[#ffd700]">
                                            <LucideIcon name="layers" /> <span>Clinical Mechanism</span>
                                        </h3>
                                        <p className="text-gray-400 text-sm leading-relaxed mb-6">
                                            Split&Balance processes multiple objective data modalities and synthesizes them into probabilistic outputs. By using **modality dropout** during training, our system remains robust even when one or more data streams (like fMRI) are absent. Available data is interpreted within a broader learned diagnostic landscape.
                                        </p>
                                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                            {['EEGNet', '3D CNN', 'Genomic', 'Behavioral'].map((tech, i) => (
                                                <div key={i} className="p-4 bg-[#000d1a] rounded-2xl border border-white/5">
                                                    <div className="text-[10px] font-black text-[#ffd700] uppercase mb-2">{tech}</div>
                                                    <div className="text-[9px] text-gray-500 font-bold leading-tight">Objective Feature Extraction</div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>

                                    <div className="bg-[#001e3d] rounded-[2.5rem] p-8 border border-white/5">
                                        <h3 className="text-xl font-black uppercase italic tracking-tighter mb-8 text-[#ffd700]">Urgent Queue</h3>
                                        <div className="space-y-4">
                                            {PATIENTS_MOCK.map(p => (
                                                <div key={p.id} onClick={() => { setSelectedPatient(p); setActiveTab('patients'); }} className="p-4 bg-[#000d1a] rounded-2xl border border-white/5 hover:border-[#ffd700]/50 cursor-pointer transition-all">
                                                    <div className="flex justify-between items-start mb-2">
                                                        <span className="text-[11px] font-black uppercase italic">{p.name}</span>
                                                        <span className="text-[8px] bg-[#ffd700]/10 text-[#ffd700] px-2 py-0.5 rounded uppercase font-black">{p.status}</span>
                                                    </div>
                                                    <div className="text-[10px] text-gray-500 font-bold">{p.id} â€¢ {p.prediction}</div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {activeTab === 'patients' && (
                            <div className="fade-in">
                                <header className="mb-12 flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
                                    <div>
                                        <h1 className="text-4xl font-black italic uppercase tracking-tighter text-white">Clinical Portal</h1>
                                        <p className="text-xs font-bold text-gray-500 uppercase tracking-[0.3em] mt-2">Inference Engine // Case SB-{selectedPatient.id}</p>
                                    </div>
                                    <div className="relative w-full md:w-64">
                                        <div className="absolute left-4 top-1/2 -translate-y-1/2">
                                            <LucideIcon name="search" className="w-4 h-4 text-gray-500" />
                                        </div>
                                        <input 
                                            type="text" 
                                            placeholder="SEARCH QUEUE..." 
                                            value={searchQuery}
                                            onChange={(e) => setSearchQuery(e.target.value)}
                                            className="w-full bg-[#001e3d] border border-white/10 rounded-xl py-3 pl-12 pr-4 text-[10px] font-black uppercase tracking-widest focus:outline-none focus:border-[#ffd700]" 
                                        />
                                    </div>
                                </header>

                                <div className="grid grid-cols-1 lg:grid-cols-12 gap-8">
                                    <div className="lg:col-span-3 space-y-3">
                                        {filteredPatients.map(p => (
                                            <div key={p.id} onClick={() => setSelectedPatient(p)} className={`p-5 rounded-[2rem] border transition-all cursor-pointer ${selectedPatient.id === p.id ? 'bg-[#ffd700] text-black border-[#ffd700]' : 'bg-[#001e3d] border-white/5 hover:border-white/20'}`}>
                                                <div className="text-xs font-black uppercase italic mb-1">{p.name}</div>
                                                <div className={`text-[9px] font-bold uppercase ${selectedPatient.id === p.id ? 'text-black/60' : 'text-gray-500'}`}>ID: {p.id}</div>
                                                {selectedPatient.id === p.id && <div className="mt-3 flex items-center text-[9px] font-black uppercase tracking-widest"><LucideIcon name="radio" className="w-3 h-3 mr-2 status-pulse" /> Active Match</div>}
                                            </div>
                                        ))}
                                    </div>

                                    <div className="lg:col-span-9 space-y-8">
                                        <div className="bg-[#001e3d] rounded-[3rem] p-10 border border-white/5 relative overflow-hidden flex flex-col md:flex-row items-center justify-between gap-12">
                                            <div className="space-y-6 relative z-10 max-w-lg">
                                                <div className="inline-flex items-center space-x-2 bg-[#ffd700]/10 border border-[#ffd700]/30 px-4 py-1.5 rounded-full">
                                                    <LucideIcon name="zap" className="w-4 h-4" color="#ffd700" />
                                                    <span className="text-[#ffd700] text-[10px] font-black uppercase tracking-[0.2em]">Weighted Verdict Active</span>
                                                </div>
                                                <h2 className="text-6xl font-black italic uppercase tracking-tighter leading-none">{selectedPatient.prediction}</h2>
                                                <p className="text-gray-400 text-sm font-medium italic">{selectedPatient.reasoning}</p>
                                                <div className="flex space-x-4">
                                                    <div className="bg-white/5 p-4 rounded-2xl border border-white/10">
                                                        <div className="text-[10px] font-bold text-gray-500 uppercase">Misdiagnosis Risk</div>
                                                        <div className="text-sm font-black text-red-500 uppercase">{selectedPatient.misdiagnosisRisk}</div>
                                                    </div>
                                                    <div className="bg-white/5 p-4 rounded-2xl border border-white/10">
                                                        <div className="text-[10px] font-bold text-gray-500 uppercase">Est. Burden Saved</div>
                                                        <div className="text-sm font-black text-[#ffd700]">{selectedPatient.fiscalBurden}</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div className="relative z-10 text-center">
                                                <div className="w-56 h-56 rounded-full border-[12px] border-white/5 flex flex-col items-center justify-center p-8 bg-[#000d1a] shadow-2xl">
                                                    <div className="text-[10px] font-black text-gray-500 uppercase mb-2">Confidence</div>
                                                    <div className="text-7xl font-black italic leading-none">{selectedPatient.probability}<span className="text-xl font-bold text-[#ffd700]">%</span></div>
                                                    <div className="text-[9px] font-black text-[#ffd700] uppercase mt-2 tracking-[0.2em]">Fusion Result</div>
                                                </div>
                                            </div>
                                        </div>

                                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                            <ModalityIndicator type="EEG (EEGNet)" data={selectedPatient.data.eeg} />
                                            <ModalityIndicator type="fMRI (3D CNN)" data={selectedPatient.data.fmri} />
                                            <ModalityIndicator type="Genomic Atlas" data={selectedPatient.data.genetic} />
                                            <ModalityIndicator type="Behavioral Quant" data={selectedPatient.data.behavioral} />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {activeTab === 'tech' && (
                            <div className="max-w-4xl fade-in">
                                <h1 className="text-4xl font-black italic uppercase tracking-tighter mb-8 text-[#ffd700]">The Fusion Architecture</h1>
                                <div className="space-y-8">
                                    <div className="bg-[#001e3d] p-10 rounded-[3rem] border border-white/5 shadow-2xl">
                                        <h3 className="text-white font-black uppercase italic tracking-tighter text-2xl mb-6">Robust Multimodal Integration</h3>
                                        <p className="text-gray-400 leading-relaxed">
                                            The system architecture consists of independent modality-specific machine learning models combined through a <strong>multimodal fusion mechanism</strong>. This ensures that the clinical decision-making is supported by objective, data-driven patterns.
                                        </p>
                                    </div>
                                    <div className="bg-[#ffd700] p-10 rounded-[3rem] text-black">
                                        <h3 className="font-black italic uppercase text-2xl mb-6">Modality Dropout Innovation</h3>
                                        <p className="font-bold">
                                            Intentionally introduced during training, modality dropout allows Split&Balance to predict status even when data streams (like fMRI) are absent. This allows for clinical continuity across diverse hospital environments.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        )}

                        {activeTab === 'about' && (
                            <div className="fade-in">
                                <h1 className="text-4xl font-black italic uppercase tracking-tighter mb-12 text-[#ffd700]">The Collective</h1>
                                <div className="grid md:grid-cols-4 gap-6">
                                    {[
                                        { name: 'Christine', role: 'Main Developer', bio: 'Expert in Python-based AI and neuroscience.' },
                                        { name: 'Allen', role: 'Strategy & Market', bio: 'Competition veteran and market analyst.' },
                                        { name: 'Sophie', role: 'Creative Director', bio: 'Graphic design and cross-team visual lead.' },
                                        { name: 'Samantha', role: 'Institutional Relations', bio: 'Public speaking and marketing lead.' }
                                    ].map(m => (
                                        <div key={m.name} className="p-6 bg-[#001e3d] rounded-[2rem] border border-white/5">
                                            <div className="w-12 h-12 bg-[#ffd700] rounded-xl flex items-center justify-center text-black font-black mb-4">{m.name[0]}</div>
                                            <div className="font-black uppercase italic text-sm mb-1">{m.name}</div>
                                            <div className="text-[9px] font-black text-[#ffd700] uppercase tracking-widest mb-4">{m.role}</div>
                                            <p className="text-[11px] text-gray-500 font-medium leading-relaxed">{m.bio}</p>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>